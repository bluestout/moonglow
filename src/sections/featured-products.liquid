

<section class="featured-product {% if section.settings.wide_display %} fluid-display {% endif %}">
    <div class="heading">
        <h3 class="text-center">{{ section.settings.title }}</h1>
        <div class="devider"></div>
    </div>
    <div class="content grid pagination">
        {% assign page_items = 0 %}
        {% for block in section.blocks %}
            {% assign product = all_products[block.settings.product] %}

            {% assign product_price             = product.price %}
            {% assign product_compare_at_price  = product.compare_at_price %}
            {% assign collection_handles        = product.collections | map: 'handle' %}
            {% if product.url != blank %}
                {% if page_items < section.settings.item_per_page %}
                    {% if page_items == 4 %}
                        <div class="banner-caption one-half left">
                            <div class="one-half banner left lazyload" data-bgset="{% include 'responsive-bg-image', image: section.settings.caption_banner %}"></div>
                            <div class="one-half info right" style="background-color: {{ section.settings.caption_bg_color }} ">
                                <div class="content">
                                    <img src=" {{ 'present_ico.svg' | asset_url }} " alt="{{ section.settings.caption_title }}">
                                    <h3 class="mark"> {{ section.settings.caption_title }} </h3>
                                    <div class="devider left"></div>
                                    <div class="desc">
                                        {{ section.settings.caption_text }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    <div class="grid__item two-eighths medium-down--one-half">
                        <div class="item">
                            <div class="img_element__wrap zoom">
                                <a href="{{ product.url }}">
                                    {% include 'responsive-image' with
                                    image: product.featured_image,
                                    max_width: 300,
                                    max_height: 300,
                                    alt: product.title
                                    %}
                                </a>

                                <div class="banner_holder">
                                    {% if product_compare_at_price > product_price %}<div translatable class="sale_banner thumbnail_banner">on sale</div>{% endif %}
                                    {% if collection_handles contains 'just-landed' %}<div translatable class="new_banner thumbnail_banner">new</div>{% endif %}
                                    {% if collection_handles contains 'coming-soon' %}<div translatable class="new_banner thumbnail_banner">coming soon</div>{% endif %}
                                    {% if collection_handles contains 'pre-order' %}<div translatable class="new_banner thumbnail_banner">pre order</div>{% endif %}
                                    {% if product.tags contains 'deal' %}<div translatable class="deal_banner thumbnail_banner">deal</div>{% endif %}
                                    {% if product.tags contains 'Excluded' %}<div translatable class="not_promotion_banner thumbnail_banner">not on promotion</div>{% endif %}
                                </div>
                            </div>
                            <div class="product_info">
                                <div class="title">
                                    <a href="{{product.url}}"><p class="text-center">{{ product.title | truncate: 50, '...' }}</p></a>
                                </div>
                                <div class="review-sec">
                                    <div class="yotpo bottomLine" data-product-id="{{ product.id }}"></div>
                                </div>
                                <div class="price">
                                    <h4 class="text-center">{{ product_price | money  }}</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="grid__item two-eighths medium-down--one-half hide">
                        <div class="item">
                            <div class="img_element__wrap zoom">
                                <a href="{{ product.url }}">
                                  {% include 'responsive-image' with
                                  image: product.featured_image,
                                  max_width: 300,
                                  max_height: 300,
                                  alt: product.title
                                  %}
                                </a>

                                <div class="banner_holder">
                                    {% if product_compare_at_price > product_price %}<div translatable class="sale_banner thumbnail_banner">on sale</div>{% endif %}
                                    {% if collection_handles contains 'just-landed' %}<div translatable class="new_banner thumbnail_banner">new</div>{% endif %}
                                    {% if collection_handles contains 'coming-soon' %}<div translatable class="new_banner thumbnail_banner">coming soon</div>{% endif %}
                                    {% if collection_handles contains 'pre-order' %}<div translatable class="new_banner thumbnail_banner">pre order</div>{% endif %}
                                    {% if product.tags contains 'deal' %}<div translatable class="deal_banner thumbnail_banner">deal</div>{% endif %}
                                    {% if product.tags contains 'Excluded' %}<div translatable class="not_promotion_banner thumbnail_banner">not on promotion</div>{% endif %}
                                </div>
                            </div>
                            <div class="product_info">
                                <div class="title">
                                    <a href="{{product.url}}"><p class="text-center">{{ product.title | truncate: 50, '...' }}</p></a>
                                </div>
                                <div class="review-sec">
                                    <div class="yotpo bottomLine" data-product-id="{{ product.id }}"></div>
                                </div>
                                <div class="price" >
                                    <h4 class="text-center">{{ product_price | money  }}</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
                {% assign page_items = page_items | plus: 1 %}
            {% endif %}

        {% endfor %}
        <button class="button load_more_btn">Load more</button>
    </div>
    <div id="feature-products" class="owl-carousel owl-theme">
        {% for block in section.blocks %}
            {%- assign product = all_products[block.settings.product] -%}
            {% if product.url != blank %}
                {% assign product_price             = product.price %}
                {% assign product_compare_at_price  = product.compare_at_price %}
                {% assign collection_handles        = product.collections | map: 'handle' %}
                <div class="item">
                    <a href="{{ product.url }}">
                        <div class="img_element__wrap">
                            {% include 'responsive-image' with
                            image: product.featured_image,
                            max_width: 300,
                            max_height: 300,
                            alt: product.title
                            %}
                            <div class="banner_holder">
                                {% if product_compare_at_price > product_price %}<div translatable class="sale_banner thumbnail_banner">on sale</div>{% endif %}
                                {% if collection_handles contains 'just-landed' %}<div translatable class="new_banner thumbnail_banner">new</div>{% endif %}
                                {% if collection_handles contains 'coming-soon' %}<div translatable class="new_banner thumbnail_banner">coming soon</div>{% endif %}
                                {% if collection_handles contains 'pre-order' %}<div translatable class="new_banner thumbnail_banner">pre order</div>{% endif %}
                                {% if product.tags contains 'deal' %}<div translatable class="deal_banner thumbnail_banner">deal</div>{% endif %}
                                {% if product.tags contains 'Excluded' %}<div translatable class="not_promotion_banner thumbnail_banner">not on promotion</div>{% endif %}
                            </div>
                        </div>
                        <div class="product_info">
                            <div class="title">
                                <p class="text-center">{{ product.title }}</p>
                            </div>
                            <div class="price">
                                <h4 class="text-center">{{ product_price | money  }}</p>
                            </div>
                        </div>
                    </a>

                </div>
            {% endif %}
        {% endfor %}
    </div>
    <div class="link-pannel medium-up--hide">
        <a href="/collections/all" class="button small white">shop all</a>
    </div>
</section>

{% schema %}
    {
        "name": "Feature products",
        "settings": [
            {
                "type": "checkbox",
                "id": "wide_display",
                "label": "Wide display"
            },
            {
                "type": "text",
                "id": "title",
                "label": "Heading title",
                "default": "heading title"
            },
            {
                "type": "range",
                "id": "item_per_page",
                "label": "Product per page",
                "min": 1,
                "max": 10,
                "step": 1,
                "default": 8
            },
            {
                "type": "image_picker",
                "id": "caption_banner",
                "label": "Banner"
            },
            {
                "type": "color",
                "id": "caption_bg_color",
                "label": "Caption background color"
            },
            {
                "type": "text",
                "id": "caption_title",
                "label": "Caption title"
            },
            {
                "type": "richtext",
                "id": "caption_text",
                "label": "Caption description"
            }
        ],
        "max_blocks": 32,
        "blocks":[
            {
                "type": "product",
                "name": "Product",
                "settings": [
                    {
                        "type": "product",
                        "id": "product",
                        "label": "Feature Product"
                    }
                ]
            }
        ],
        "presets": [
            {
                "category": "Product",
                "name":"Feature Products"
            }
        ]
    }
{% endschema %}
